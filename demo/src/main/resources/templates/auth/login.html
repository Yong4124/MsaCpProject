<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>로그인</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .tab-buttons button { margin-right: 10px; padding: 10px; cursor: pointer; }
        .tab-buttons button.active { background-color: #007BFF; color: white; }
        .tab-content { margin-top: 20px; }
        .form-group { margin-bottom: 10px; }
        label { display: block; font-weight: bold; }
        input { width: 250px; padding: 8px; }
        .error { color: red; margin-bottom: 10px; }
    </style>
</head>
<body>

<h2>로그인</h2>

<!-- 로그인 실패 시 에러 메시지 -->
<div th:if="${param.error}" class="error">
    아이디 또는 비밀번호가 올바르지 않습니다.
</div>

<div class="tab-buttons">
    <button type="button" id="personalTab" class="active" onclick="showTab('personal')">개인회원</button>
    <button type="button" id="companyTab" onclick="showTab('company')">기업회원</button>
</div>

<!-- 개인회원 로그인 -->
<div id="personal" class="tab-content">
    <!-- ✅ action을 /auth/login-process 로 변경 -->
    <form th:action="@{/auth/login-process}" method="post">
        <input type="hidden" name="memberType" value="PERSONAL"/>

        <div class="form-group">
            <label for="personalLoginId">아이디</label>
            <!-- ✅ name을 loginId 로 변경 (SecurityConfig.usernameParameter("loginId")와 일치) -->
            <input type="text" id="personalLoginId" name="loginId" required />
        </div>

        <div class="form-group">
            <label for="personalPassword">비밀번호</label>
            <input type="password" id="personalPassword" name="password" required />
        </div>

        <button type="submit">로그인</button>
    </form>
</div>

<!-- 기업회원 로그인 -->
<div id="company" class="tab-content" style="display:none;">
    <!-- ✅ action을 /auth/login-process 로 변경 -->
    <form th:action="@{/auth/login-process}" method="post">
        <input type="hidden" name="memberType" value="COMPANY"/>

        <div class="form-group">
            <label for="companyLoginId">아이디</label>
            <!-- ✅ name을 loginId 로 변경 -->
            <input type="text" id="companyLoginId" name="loginId" required />
        </div>

        <div class="form-group">
            <label for="companyPassword">비밀번호</label>
            <input type="password" id="companyPassword" name="password" required />
        </div>

        <button type="submit">로그인</button>
    </form>
</div>

<script>
    function showTab(tabName) {
        document.getElementById('personal').style.display = (tabName === 'personal') ? 'block' : 'none';
        document.getElementById('company').style.display = (tabName === 'company') ? 'block' : 'none';

        document.getElementById('personalTab').classList.toggle('active', tabName === 'personal');
        document.getElementById('companyTab').classList.toggle('active', tabName === 'company');
    }
</script>

</body>
</html>
